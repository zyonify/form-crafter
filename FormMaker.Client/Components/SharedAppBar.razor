@inject NavigationManager Navigation

<MudAppBar Elevation="2" Dense="false" Fixed="true" Style="height: 64px; z-index: 1300;" role="navigation" aria-label="Main navigation">
    <MudButton Variant="Variant.Text"
               Color="Color.Inherit"
               Href="/"
               Style="font-size: 1.5rem; font-weight: 600; text-transform: none;"
               aria-label="Form Maker home">
        Form Maker
    </MudButton>

    <MudSpacer />

    <!-- Main Navigation Links -->
    <MudButton Variant="@GetVariant("/")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Home"
               Href="/"
               Size="Size.Large"
               Style="margin-left: 8px;">
        Home
    </MudButton>

    <MudButton Variant="@GetVariant("/editor")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Edit"
               Href="/editor"
               Size="Size.Large"
               Style="margin-left: 8px;">
        Editor
    </MudButton>

    <MudButton Variant="@GetVariant("/forms")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Folder"
               Href="/forms"
               Size="Size.Large"
               Style="margin-left: 8px;">
        My Forms
    </MudButton>

    <MudButton Variant="@GetVariant("/templates")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Description"
               Href="/templates"
               Size="Size.Large"
               Style="margin-left: 8px;">
        Templates
    </MudButton>

    <MudButton Variant="@GetVariant("/help")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Help"
               Href="/help"
               Size="Size.Large"
               Style="margin-left: 8px;">
        Help
    </MudButton>

    <MudButton Variant="@GetVariant("/about")"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Info"
               Href="/about"
               Size="Size.Large"
               Style="margin-left: 8px;">
        About
    </MudButton>
</MudAppBar>

@code {
    private Variant GetVariant(string href)
    {
        var currentPath = new Uri(Navigation.Uri).LocalPath;

        // Special handling for home page
        if (href == "/" && currentPath == "/")
            return Variant.Filled;

        // For other pages, check if current path starts with href
        if (href != "/" && currentPath.StartsWith(href, StringComparison.OrdinalIgnoreCase))
            return Variant.Filled;

        return Variant.Text;
    }
}
